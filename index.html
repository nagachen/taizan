<!-- 這是一個有關FFXVI和機戰傭兵介紹的一頁式網頁，當使用者從上而下
瀏灠過二款遊戲的特色後，將會進行問卷調票投票，並在投票過後顯示
投票結果 -->

<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<style>
    select {
        width: 100%;

        text-align: center;
        border-radius: 10px;
    }
</style>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sofia">
</head>
<style>
    body {
        background-image: url('./pic/back01.jpg');
        background-size: cover;
        font-family: '';
        font-weight: 600;
        position: relative;

    }

    .about {
        font-family: "Trirong", serif;
        font-size: 20px;
        /* font-weight: bold; */
    }

    .img {

        width: 50vw;
    }


    .mybtn {
        width: 30px;
        height: 30px
    }

    .myDiv {
        background-color: white;
        padding: 8px;
        border-radius: 2%;
    }

    img {
        border-radius: 2%;
    }

    .row {
        margin-top: 40px;
    }

    select {
        box-shadow: 3px 3px 1px rgb(6, 54, 70);
    }
</style>

<body>
    <!-- 前面介紹 -->
    <div class="container-fluid ">
        <div class="row">
            <div class="col-12   ">
                <div class="myDiv" style="position:relative"><img src="./pic/title.jpg" width="100%">
                    <a href="#ffxvi"
                        style="display:block;width:30%;height:calc(100vw * 0.65 * 0.5);position:absolute;left:10%;top:5%"></a>
                    <a href="#armored"
                        style="display:block;width:30%;height:calc(100vw * 0.65 * 0.5);position:absolute;right:10%;top:5%"></a>
                </div>

            </div>
        </div>
    </div>


    <!-- 中間段落 FF-->
    <div class="container about mt-5">
        <div class="row d-flex flex-wrap-reverse">
            <div class="col-12   ">
                <h2 class="fw-semibold text-center" id="ffxvi">FINAL FANTASY XVI一週突破300萬套</h2>
                &emsp;&emsp;你也是那300萬份之一嗎「吉田直樹」領軍開、睽違六有的『FF』系列本篇最新作『FINAL FANTASY
                XVI』全球熱銷突破300萬套，如此強大的銷售套數，究竟有什麼魅力和特色能讓玩家買單呢？
            </div>

        </div>

        <div class="row d-flex flex-wrap-reverse">
            <div class="col-12  col-md-6 d-flex flex-column justify-content-around">
                <h2 class="fw-semibold text-center">特色1.相信吉田、可以期待</h2>
                <P>
                    &emsp;&emsp;由於FFXV更換製作團隊,導致FFXV成品不如預期，但這次FFXVI將由把FFXIV起死回生的製作人吉田直樹領軍製作。相信吉田、可以期待

                </P>
                <P>

                </P>
            </div>
            <div class="col-12  col-md-6">
                <div class="myDiv"><img src="./pic/sp1.jpg" width="100%"></div>
            </div>
        </div>
        <div class="row d-flex flex-wrap-reverse">
            <div class="col-12  col-md-6 d-flex flex-column justify-content-around">
                <h2 class="fw-semibold text-center">特色2.「劇情聚焦」和「動作聚焦」兩種模式</h2>
                <P>
                    &emsp;&emsp;為了不熟悉動作遊戲的玩家，本作也準備了許多好用的功能，這次進入遊戲後就能選擇「劇情聚焦」和「動作聚焦」兩種模式。其實兩個模式沒有任何差別，只差在劇情聚焦模式中，一開始就幫你裝備上幾個外掛飾品，絕對能夠通行無阻地玩到遊戲全破為止。選擇了動作聚焦的玩家如果真的遇到阻礙，也一樣能裝備上那些超強飾品，打倒強力怪物。
                </P>
                <P></P>
            </div>
            <div class="col-12  col-md-6">
                <div class="myDiv"><img src="./pic/sp2.jpg" width="100%"></div>
            </div>
        </div>
        <div class="row d-flex flex-wrap-reverse">
            <div class="col-12  col-md-6 d-flex flex-column justify-content-around">
                <h2 class="fw-semibold text-center">特色3.召喚獸技能玩法多元化自由度高</h2>
                <P>
                    &emsp;&emsp;召喚獸是《Final Fantasy
                    XVI》的一大重點，這反映在戰鬥系統之上：玩家可以裝備最多三個召喚獸，每個召喚獸都有一種固有技能（按O鍵使用），例如Ifrit是突進、Garuda是捕捉，而Titan則是格檔。另外每款召喚獸可以再攜帶兩個主動技能。剛開始時可能會因為按鍵太多而會手忙腳亂，不過在熟習之後就可將普通攻擊、普通魔法和召喚獸技能交替組合使用，打出各種華麗的連招。
                </P>
                <P>

                </P>

            </div>
            <div class="col-12  col-md-6">
                <div class="myDiv"><img src="./pic/sp3.jpg" width="100%"></div>
            </div>

        </div>


        <div class="row d-flex flex-wrap-reverse">
            <div class="col-12  col-md-6 d-flex flex-column justify-content-around">
                <h2 class="fw-semibold text-center">特色4.剌激大場面的召喚獸大獸</h2>
                <P>
                    &emsp;&emsp;中後期的召喚獸合戰非常精彩而且充滿速度感，絕對不是慢吞吞又無聊的劇情戰鬥，非常值得一玩。尤其是對抗泰坦的一戰，實在非常讓人驚艷。
                </P>
                <P></P>
            </div>
            <div class="col-12  col-md-6">
                <div class="myDiv"><img src="./pic/sp4.jpg" width="100%"></div>
            </div>

        </div>


        <div class="row d-flex flex-wrap-reverse">
            <div class="col-12  col-md-6 d-flex flex-column justify-content-around">
                <h2 class="fw-semibold text-center">特色5.米津玄師為《FINAL FANTASY XVI》量身訂製的最新單曲</h2>
                <P>
                    &emsp;&emsp;月を見ていた〉是米津玄師為《FINAL FANTASY XVI》量身訂製的最新單曲，以磅礡的樂曲和濃厚的情緒感動聽眾。
                    歌曲創作過程和遊戲團隊一起歷時三年開發，結合了《FINAL
                    FANTASY》史詩般的世界觀，充滿對遊戲故事本身的共鳴
                </P>
                <P></P>
            </div>

            <div class="col-12  col-md-6">
                <div class="myDiv">
                    <iframe width="100%" height="480" src="https://www.youtube.com/embed/PVWo-M8tN7g"
                        title="FINAL FANTASY XVI テーマソングトレーラー / 米津玄師『月を見ていた』" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen>
                    </iframe>
                </div>
            </div>

        </div>
    </div>

    <!-- 中間段落 ARM6-->
    <div class="container about mt-5">
        <div class="row d-flex ">
            <div class="col-12   ">
                <h2 class="fw-semibold text-center mb-4" id="armored">見證強化人生存的姿態！《機戰傭兵 VI：境界天火》</h2>
                &emsp;&emsp;由曾製作《艾爾登法環》及《黑暗靈魂》的 FromSoftware 及萬代南夢宮娛樂攜手推出的最新作品《機戰傭兵 VI：境界天火》，是相隔 9
                年再次復出的《機戰傭兵》系列最新作，活用雙方至今透過共同合作開發獲得的知識及經驗，重新審視系列核心概念而成。承襲系列一貫特色，玩家可以組裝與操作自己專屬的機甲，縱橫規模龐大的開闊立體舞台，以射擊與近身戰鬥等充滿魄力的動作體驗緊湊的全方位戰鬥與刺激滿點的頭目戰。
            </div>
        </div>

        <div class="row ">
            <div class="col-12  col-md-6">
                <div class="myDiv">
                    <img src="./pic/fs1.jpg" width="100%">
                </div>
            </div>

            <div class="col-12  col-md-6 d-flex flex-column justify-content-around">
                <h2 class="fw-semibold text-center">特色1.「衝擊值」與「踉蹌」</h2>
                <P>
                    &emsp;&emsp;本作的特色戰鬥機制是「衝擊值」與「踉蹌」，這個機制有點類似於《隻狼》的體幹質。只要對敵人持續進行有效攻擊，就會累積衝擊值，而衝擊值累積到滿就會觸發「踉蹌」。此時所有傷害都會變成直擊傷害，而且可以短時間內進行單方面的攻擊。

                </P>
                <P></P>

            </div>


            <div class="row  ">
                <div class="col-12  col-md-6 ">
                    <div class="myDiv">
                        <img src="./pic/fs2.jpg" width="100%">
                    </div>
                </div>

                <div class="col-12  col-md-6 d-flex flex-column justify-content-around">
                    <h2 class="fw-semibold text-center">特色2.組裝</h2>
                    <P>
                        &emsp;&emsp;本作獲勝的關鍵，除了觀察與戰鬥外，就是操作的機甲由自己組裝。本次可以組裝的部位包括了「武器」、「框架」、「內裝」三項組裝大項目。武器包括了左手、右手、左肩、右肩四個部位，框架包括了頭部、核心、手部、足部，內裝則有推進器、武器管制系統、發動機。
                    </P>
                    <P></P>
                </div>
            </div>
            <div class="row  ">
                <div class="col-12  col-md-6">
                    <div class="myDiv">
                        <img src="./pic/fs3.jpg" width="100%">
                    </div>
                </div>

                <div class="col-12  col-md-6 d-flex flex-column justify-content-around">
                    <h2 class="fw-semibold text-center">特色3.難度非凡的頭目戰</h2>
                    <P> &emsp;&emsp;召系列作裡巨大的頭目戰回來了，這次遇到的金屬怪物將較以往都更加龐大與駭然。
                        「這些強敵的種類非常廣泛，有各種形狀和尺寸。」「巨型戰鬥直升機、重裝機動砲塔、還有無人駕駛的重型破壞機器，全都設定好，將無差別大肆轟炸入侵者。《機戰傭兵VI》將提供大量爆炸性的戰鬥體驗，驅使玩家突破重重困境，戰勝這些碩大無比的異形機甲。」
                    </P>
                    <P></P>

                </div>
            </div>

            <div class="row ">
                <div class="col-12  col-md-6">
                    <div class="myDiv">
                        <img src="./pic/fs4.jpg" width="100%">
                    </div>
                </div>

                <div class="col-12  col-md-6 d-flex flex-column justify-content-around">
                    <h2 class="fw-semibold text-center">特色4.競技場回歸</h2>
                    <P>&emsp;&emsp;對於《機戰傭兵》的老粉絲而言，還有更多好消息。備受喜愛的競技場模式在《機戰傭兵VI》以模擬訓練的方式回歸，玩家可以在其中與各式各樣的特製機甲進行一系列戰鬥。</P>
                    <P></P>
                </div>
            </div>

            <div class="row ">
                <div class="col-12 col-md-6 ">
                    <div class="myDiv">
                        <iframe width="100%" height="484" src="https://www.youtube.com/embed/UKKChvEP6gk"
                            title="《機戰傭兵™VI 境界天火™》劇情宣傳影片" frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                        </iframe>
                    </div>
                </div>
                <div class="col-12  col-md-6  d-flex flex-column justify-content-around ">
                    <h2 class="fw-semibold text-center">遊戲宣傳影片展示</h2>
                    <P> &emsp;&emsp;在設定為本篇故事前傳的最新劇情宣傳影片中，玩家將可以看到在指導手沃爾特的指示之下，以幾近冷酷的執念完成任務的強化人們最後的生存姿態。玩家角色及其飼主的相遇，並一瞥等待著他們的殘酷戰場。
                    </P>
                    <p></p>
                </div>

            </div>
        </div>
        <!-- 最後的功能 投票-->
        <div class="container mt-5">
            <div class="row   ">
                <div class="col mt-2">
                    <h2 class="text-center fw-bold">請投下你神聖的一票</h2>
                </div>


            </div>
            <div class="row  flex-column align-items-center mt-3 ">
                <div class="col-6 text-center mb-3 fw-bolder">
                    <h2 id="voteTitle">ttt</h2>
                    <!-- //年齡 -->
                </div>
            </div>
            <div id="showSelect">
                <div class="row  flex-column align-items-center mt-3">
                    <div class="col-6 text-center">
                        <h3 class="mb-3">請問你的年紀在那個範圍？</h3>

                        <div class="age">
                            <select name="age" id="age">
                                <option value="null">

                                </option>
                                <option value="age18">
                                    18歲之前
                                </option>
                                <option value="age24">
                                    19~24歲
                                </option>
                                <option value="age29">
                                    25~29歲
                                </option>
                                <option value="age44">
                                    30~44歲
                                </option>
                                <option value="age64">
                                    45~64歲
                                </option>
                                <option value="age65up">
                                    65歲之後
                                </option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- 年收入 -->
                <div class="row  flex-column align-items-center mt-3 ">
                    <div class="col-6 text-center">
                        <h3 class="mb-3">請問你的年收入大約落入那個範圍？</h3>

                        <div class="income">
                            <select name="income" id="income">
                                <option value="null">

                                </option>
                                <option value="income30">
                                    小於30萬
                                </option>
                                <option value="income45">
                                    30~45萬
                                </option>
                                <option value="income59">
                                    46~59萬
                                </option>
                                <option value="income80">
                                    59~80萬
                                </option>
                                <option value="income100">
                                    81~100萬
                                </option>
                                <option value="income100up">
                                    100萬之後
                                </option>
                            </select>
                        </div>
                    </div>
                </div>


                <div class="row  flex-column align-items-center mt-3 ">

                    <div class="col-6 ">

                        <div class=" mt-3 ">
                            <input class=" mybtn" type="radio" name="opt" id="opt1">
                            <label for="opt1" id="voteLabel1">
                                Default radio
                            </label>
                        </div>
                    </div>
                </div>
                <div class="row  flex-column align-items-center mt-3 ">
                    <div class="col-6  ">

                        <div class=" mt-3">
                            <input class=" mybtn" type="radio" name="opt" id="opt2">
                            <label for="opt2" id="voteLabel2">
                                Default checked radio
                            </label>
                        </div>
                    </div>
                </div>
                <div class="row  flex-column align-items-center mt-3 ">
                    <div class="col-6  ">

                        <div class=" mt-3">
                            <input class=" mybtn" type="radio" name="opt" id="opt3">
                            <label for="opt3" id="voteLabel3">
                                Default checked radio
                            </label>
                        </div>
                    </div>
                </div>
                <div class="row  flex-column align-items-center mt-3 ">
                    <div class="col-6  ">

                        <div class=" mt-3">
                            <input class=" mybtn" type="radio" name="opt" id="opt4">
                            <label for="opt4" id="voteLabel4">
                                Default checked radio
                            </label>
                        </div>
                    </div>
                </div>
                <div class="row  flex-column align-items-center mt-3 ">
                    <div class="col-6  ">

                        <div class=" mt-3">
                            <input class=" mybtn" type="radio" name="opt" id="opt5">
                            <label for="opt5" id="voteLabel5">
                                Default checked radio
                            </label>
                        </div>
                    </div>

                </div>
                <div class="text-center">
                    <button type="button" onclick="Ok()" class="btn btn-primary m-3">確認</button>
                    <button type="button" onclick="voteInit()" class="btn btn-secondary">重置</button>

                </div>
            </div>
        </div>

        <!-- 顯示隱藏按鍵 -->
        <button style="width: 100%;display: none;" id="showBtn" >-</button>
        <!-- 最後的功能 結果統計-->
        <div class="row" id="showVote" style="display:none;">
            <div class="col-12 d-flex justify-content-center">
                <table class="vote" id="vote" style="width: 70%;">


                </table>

            </div>
        </div>

        <div class="row">
            <div class="col-12 d-flex flex-column ">
                <div class="voteAge" id="voteAge" style="width: 70%;">
                    <!-- chart js -->
                    <!-- <canvas id="myChart" width="400" height="400"></canvas> -->

                </div>

            </div>
        </div>
    </div>
    <div class="fixed-bottom">
        <a href="https://nagachen.github.io"><button type="button" class="btn btn-info">回GIT頁面</button></a>

        <a href="#ffxvi"><button type="button" class="btn btn-light btn-sm">FFXVI</button></a>

        <a href="#armored"><button type="button" class="btn btn-dark btn-sm">機戰VI</button></a>

    </div>
</body>

</html>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"
    integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>


    $(window).scroll(function () {
        //移動定位變換場景
        let scrollVal = $(this).scrollTop();
        // console.log(scrollVal);
        if (scrollVal >= 2980) {


            $('body').css({
                // "background-image": "url('./pic/star.jpeg')"
            });


            $('.container').css({
                // "background-image": "url('./pic/star.jpeg')",
                'background-size': 'cover',
                // 'color': 'white'
            });


        }
        if (scrollVal < 2780 || scrollVal > 4700) {
            $('body').css({
                "background-image": "url('./pic/back01.jpg')"
            });
            $('.container').css({
                "background-image": "url('./pic/back01.jpg')",
                'background-size': 'cover',
                'color': 'black'
            });

        }
    })
    function show() {
        $("#showSelect,#showBtn,#showVote").toggle();

    }


    function checkSelect() {
        if ($('#age').val() == 'null' || $('#income').val() == 'null' || $(".mybtn[type='radio']:checked").length == 0) {

            alert("年紀和收入還有投票選項都需選擇")
            return false
        } else {
            return true
        }

    }

    function saveValue() {
        age = $('#age').val()
        income = $('#income').val()

        opt = $(".mybtn[type='radio']:checked").parent().children('label').text()


        //寫入DB
        $.post("./api/save_vote.php", { age, income, opt }, (res) => {

        })

    }

    function showVote() {
        $("#vote").html('');
        $.post("./api/show_vote.php", (res) => {
            // console.log(res)
            jsonObject = JSON.parse(res);
            // console.log(jsonObject)
            $(jsonObject).each((key, value) => {
                // console.log(value)
            })
            const newRes = Object.entries(jsonObject);
            //  console.log(newRes)
            let vote = {};
            let age = {};
            let income = {};
            for (i = 0; i < newRes.length; i++) {
                switch (newRes[i][0].charAt(0)) {
                    case 'a':
                        age[(newRes[i][0])] = newRes[i][1]
                        break;
                    case 'i':
                        income[(newRes[i][0])] = newRes[i][1]
                        break;
                    default:
                        vote[(newRes[i][0])] = newRes[i][1]
                }
            }
            // console.log(vote)

            //計算vote 總數
            let total = 0;
            $.each(vote, function (key, value) { total += parseInt(value) });
            total = (total == 0) ? 1 : total;
            let content = '';

            $.each(vote, function (key, value) {
                let rate = ((value / total) * 100).toFixed(0) + '%';
                console.log(rate);
                content = `<tr >
                        <td style="width:45%;padding:5px;" >${key}</td>
                        <td style="width:30%;padding:5px;" ><div style="width: ${rate};background: green;">${rate}</div></td>
                        <td style="width:10%;padding:5px;" >${value}票</td>
                        </tr>`
                $("#vote").append(content)

            });

            //計算各年齡的投票參與人數 chart js

            // ageDatatitle = {
            //     "age18": "18歲之前",
            //     "age19-24": "19-24歲",
            //     "age25-29": "25-29歲",
            //     "age30-44": "30-44歲",
            //     "age45-64": "45-64歲",
            //     "age65": "65歲以上"
            // }
            // total = 0;
            // $.each(age, function (key, value) { total += value });
            // total = (total == 0) ? 1 : total;
            // content = '';


            // let ctx = document.getElementById('myChart');
            // let myChart = new Chart(ctx, {
            //     type: 'bar',
            //     data: {
            //         labels: [ageDatatitle.age18,
            //         ageDatatitle.age19 - 24,
            //         ageDatatitle.age25 - 29,
            //         ageDatatitle.age30 - 44,
            //         ageDatatitle.age45 - 64,
            //         ageDatatitle.age65
            //         ],
            //         datasets: [{
            //             label: '各年齡的投票參與人數',
            //             data: [age.age18, age.age19, age.age25, age.age30, age.age45, age.age65,]
            //         }]
            //     }
            // });

        })
    }
    function Ok() {
        //投票按ok後要做的事

        if (checkSelect()) {
            saveValue()

            showVote()

            show()
        }



    }

    function init() {

        // $('.title')
        voteObj = {
            table: 'vote',
            subject_id: 1,

        }
        $.post('./api/vote.php', voteObj, (res) => {
            //使用ajax 載入titile
            // console.log(res);
            res = res.split(',');
            obj = {};
            res.forEach(function (value, key) {
                tmp = value.split(':');
                obj[tmp[0]] = tmp[1];

            });
            // console.log(voteObj);
            $('#voteTitle').text(obj.title);
            $('#voteLabel1').text(obj.opt1);
            $('#voteLabel2').text(obj.opt2);
            $('#voteLabel3').text(obj.opt3);
            $('#voteLabel4').text(obj.opt4);
            $('#voteLabel5').text(obj.opt5);


        })
    }

    init();


    // })
</script>